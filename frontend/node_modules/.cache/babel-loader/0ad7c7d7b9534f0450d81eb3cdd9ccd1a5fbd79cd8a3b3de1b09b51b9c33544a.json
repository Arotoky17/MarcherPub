{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MesCandidatures=()=>{const[candidatures,setCandidatures]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const token=localStorage.getItem('token');if(!token){setError('Utilisateur non authentifié');setLoading(false);return;}fetch('http://localhost:3000/api/mes-candidatures',{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>{if(!res.ok)throw new Error('Erreur lors du chargement des candidatures');return res.json();}).then(data=>{setCandidatures(data);setLoading(false);}).catch(err=>{setError(err.message);setLoading(false);});},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:\"Chargement...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-red-600\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Mes Candidatures\"}),candidatures.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucune candidature envoy\\xE9e.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-6\",children:candidatures.map(c=>/*#__PURE__*/_jsxs(\"li\",{className:\"border p-6 rounded shadow bg-white\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-indigo-600 text-lg\",children:[\"Offre : \",c.offerTitle||c.offerId]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 mt-2\",children:[\"Entreprise : \",c.companyName||'Non renseigné']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 mt-2\",children:[\"Message : \",c.message||'Aucun message']}),c.fileUrl&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3000\".concat(c.fileUrl),target:\"_blank\",rel:\"noreferrer\",className:\"text-blue-600 underline\",children:\"T\\xE9l\\xE9charger le fichier joint\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-3\",children:[\"Envoy\\xE9e le \",new Date(c.date).toLocaleString()]})]},c.id))})]});};export default MesCandidatures;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","MesCandidatures","candidatures","setCandidatures","loading","setLoading","error","setError","token","localStorage","getItem","fetch","headers","Authorization","concat","then","res","ok","Error","json","data","catch","err","message","className","children","length","map","c","offerTitle","offerId","companyName","fileUrl","href","target","rel","Date","date","toLocaleString","id"],"sources":["D:/Memoire/frontend/src/Pages/Offre/MesCandidatures.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nconst MesCandidatures = () => {\r\n  const [candidatures, setCandidatures] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setError('Utilisateur non authentifié');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    fetch('http://localhost:3000/api/mes-candidatures', {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(res => {\r\n        if (!res.ok) throw new Error('Erreur lors du chargement des candidatures');\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        setCandidatures(data);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        setError(err.message);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  if (loading) return <div className=\"p-4\">Chargement...</div>;\r\n  if (error) return <div className=\"p-4 text-red-600\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Mes Candidatures</h2>\r\n      {candidatures.length === 0 ? (\r\n        <p className=\"text-gray-500\">Aucune candidature envoyée.</p>\r\n      ) : (\r\n        <ul className=\"space-y-6\">\r\n          {candidatures.map(c => (\r\n            <li key={c.id} className=\"border p-6 rounded shadow bg-white\">\r\n              <p className=\"font-semibold text-indigo-600 text-lg\">Offre : {c.offerTitle || c.offerId}</p>\r\n              <p className=\"text-gray-700 mt-2\">Entreprise : {c.companyName || 'Non renseigné'}</p>\r\n              <p className=\"text-gray-700 mt-2\">Message : {c.message || 'Aucun message'}</p>\r\n              {c.fileUrl && (\r\n                <p className=\"mt-2\">\r\n                  <a\r\n                    href={`http://localhost:3000${c.fileUrl}`}\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                    className=\"text-blue-600 underline\"\r\n                  >\r\n                    Télécharger le fichier joint\r\n                  </a>\r\n                </p>\r\n              )}\r\n              <p className=\"text-sm text-gray-500 mt-3\">Envoyée le {new Date(c.date).toLocaleString()}</p>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MesCandidatures;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}