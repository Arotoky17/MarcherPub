{"ast":null,"code":"var _jsxFileName = \"D:\\\\Memoire\\\\frontend\\\\src\\\\Pages\\\\Offre\\\\Postuler.jsx\",\n  _s = $RefreshSig$();\n// Postuler.jsx - Formulaire de candidature à une offre publiée\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Postuler = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [offer, setOffer] = useState(null);\n  const [message, setMessage] = useState('');\n  const [file, setFile] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetch(`http://localhost:3000/api/offres/${id}`).then(res => res.json()).then(data => setOffer(data)).catch(() => alert(\"Erreur lors du chargement de l'offre\"));\n  }, [id]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    if (!token) return navigate('/');\n    const formData = new FormData();\n    formData.append('message', message);\n    if (file) formData.append('cv', file);\n    try {\n      const res = await fetch(`http://localhost:3000/api/offres/${id}/postuler`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: formData\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Erreur');\n      alert(\"Candidature envoyée avec succès !\");\n      navigate('/home');\n    } catch (err) {\n      alert(\"Erreur : \" + err.message);\n    }\n  };\n  if (!offer) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8\",\n    children: \"Chargement de l'offre...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow my-10\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: [\"Postuler \\xE0 : \", offer.title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: offer.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block mb-1 font-medium\",\n          children: \"Message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          required: true,\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          className: \"w-full p-2 border rounded\",\n          rows: 5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block mb-1 font-medium\",\n          children: \"Pi\\xE8ce jointe (CV)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".pdf,.doc,.docx\",\n          onChange: e => setFile(e.target.files[0]),\n          className: \"w-full border p-2 rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700\",\n        children: \"Envoyer la candidature\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(Postuler, \"gPsJ70LpDJzky/irS1Ewd+WjErs=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Postuler;\nexport default Postuler;\nvar _c;\n$RefreshReg$(_c, \"Postuler\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","jsxDEV","_jsxDEV","Postuler","_s","id","offer","setOffer","message","setMessage","file","setFile","navigate","fetch","then","res","json","data","catch","alert","handleSubmit","e","preventDefault","token","localStorage","getItem","formData","FormData","append","method","headers","Authorization","body","ok","Error","error","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","description","onSubmit","required","value","onChange","target","rows","type","accept","files","_c","$RefreshReg$"],"sources":["D:/Memoire/frontend/src/Pages/Offre/Postuler.jsx"],"sourcesContent":["// Postuler.jsx - Formulaire de candidature à une offre publiée\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nconst Postuler = () => {\r\n  const { id } = useParams();\r\n  const [offer, setOffer] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [file, setFile] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:3000/api/offres/${id}`)\r\n      .then(res => res.json())\r\n      .then(data => setOffer(data))\r\n      .catch(() => alert(\"Erreur lors du chargement de l'offre\"));\r\n  }, [id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return navigate('/');\r\n\r\n    const formData = new FormData();\r\n    formData.append('message', message);\r\n    if (file) formData.append('cv', file);\r\n\r\n    try {\r\n      const res = await fetch(`http://localhost:3000/api/offres/${id}/postuler`, {\r\n        method: 'POST',\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        body: formData\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || 'Erreur');\r\n      alert(\"Candidature envoyée avec succès !\");\r\n      navigate('/home');\r\n    } catch (err) {\r\n      alert(\"Erreur : \" + err.message);\r\n    }\r\n  };\r\n\r\n  if (!offer) return <div className=\"p-8\">Chargement de l'offre...</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow my-10\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Postuler à : {offer.title}</h2>\r\n      <p className=\"text-gray-700 mb-4\">{offer.description}</p>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Message</label>\r\n          <textarea\r\n            required\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            className=\"w-full p-2 border rounded\"\r\n            rows={5}\r\n          ></textarea>\r\n        </div>\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Pièce jointe (CV)</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".pdf,.doc,.docx\"\r\n            onChange={(e) => setFile(e.target.files[0])}\r\n            className=\"w-full border p-2 rounded\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700\"\r\n        >\r\n          Envoyer la candidature\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Postuler;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}